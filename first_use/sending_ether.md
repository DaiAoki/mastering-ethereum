## etherを送金してみる

先の節で、採掘の報酬としてEthereumの内部通貨であるetherを取得することができました [^1]。この節では、採掘で得たetherを他のEOAへ送金する方法と、その際に発生するトランザクションについて見ていきます。

### アカウントのアンロック
<!-- [TODO] アンロックについて書く。 -->

### etherの送金
まず最初に再度、今回作成したアカウントのetherの持ち高を確認しておきましょう。

```
> eth.accounts // 登録されている２つのアカウントを表示。
['0x24afe6c0c64821349bc1bfa73110512b33fa18e1', '0x59c444d6c4f4187d1dd1875ad74a558a2a3e20b6' ]
> eth.getBalance(eth.accounts[0]) // etherbaseである1番目のアカウントにetherの持ち高がある（採掘の報酬）。
'72500000000000000000'
> eth.getBalance(eth.accounts[1]) // 2番目のアカウントにはetherの持ち高はない。
'0'
```
アドレスが'0x24afe...'のアカウントは、725 ether を保有している一方で、もう一方の'0x59c44...'のアカウントはetherを保有していません。

この状態で'0x24afe...'から、'0x59c44...'へ、5 ether を送金します。送金は以下のコマンドを用います。fromに送金元アドレス、toに送金先アドレス、valueに送金額を指定します。

```
> eth.sendTransaction({from: eth.accounts[0], to: eth.accounts[1], value: web3.toWei(5, "ether")}) //送金の実行。実行結果としてトランザクションIDが返される。
'0xc86c2a5bdf651f54095eca87e487d4f68f12030dd559f0377e9e7bf1566b9b28'
```
送金額はweiの単位での指定のため、単位変換関数であるweb.toWeiを用いています。このコマンドを実行すると、実行結果としてトランザクションIDが返されます。コマンド実行後、しばらくして送金先のether保有額を確認すると、下記のように、問題なく5 ether ($$=$$ 5 × 10[^18] wei） が送金されていることが分かります。

【注意】送金の際は、採掘処理をバックグラウンドで実行しておく必要があります。今回の例ではテスト・ネットでの送金であり、採掘者は自分自身しかいないため、自身が採掘を実行中でないとトランザクションが処理されません。

```
> eth.getBalance(eth.accounts[1])
'5000000000000000000'
```

### トランザクション手数料
同じように今度は逆に、'0x59c44...'のアカウントから、'0x24afe...'に 3 ether 送金してみましょう。
```
> eth.getBalance(eth.accounts[1]),"ether" //保有額を確認。最初に送金された 5 ether を保有している。
'5000000000000000000'
> 
> eth.sendTransaction({from: eth.accounts[1], to: eth.accounts[0], value: web3.toWei(3, "ether")}) // 3 ether を'0x24afe...'に送金。
'0x5fd0bdcccb379a8b4034668464ad9a499a8a6b7801ed66ac23e4df3d67ec64a5'
>
> eth.getBalance(eth.accounts[1]) // 送金後の保有額を確認。 5 - 3 = 2 ether のはずが・・・・
'1998825500779091000'
```

5 ether 保有していた状態から、3 ether 送金したため、'0x59c44...' のアカウントの ether保有額は 2 ether と予想されるのですが、実際には 2etherよりも小さい額になっています。

実は、この送金額以上に引かれた差額のether（1,174,499,220,909,000 wei)がトランザクションを生成した際に採掘者に対して支払うトランザクション手数料となっており、採掘者の報酬に加えられます。


### トランザクション情報を調べる。
ここで、トランザクションについてもう少し詳しく調べてみましょう。トランザクションの情報は`eth.getTransaction(tx_id)`コマンドで調べることができます。下記に、'0x59c44...'のアドレスから 3 ether 送金した際のトランザクションの情報を見てみましょう。パラメーター、tx_idには、送金実行時に返されたトランザクションIDを指定します。
```
> eth.getTransaction('0x5fd0bdcccb379a8b4034668464ad9a499a8a6b7801ed66ac23e4df3d67ec64a5')
{
  blockHash: '0xeef0f74bc51ecb9f3d64099fa4f3c1651af36a632380d41dd987e8e7064a5276',
  blockNumber: 11076,
  from: '0x868d840e872df5134a3be6f7b68e52cb680fe3ac',
  gas: 90000,
  gasPrice: '55928534329',
  hash: '0x5fd0bdcccb379a8b4034668464ad9a499a8a6b7801ed66ac23e4df3d67ec64a5',
  input: '0x',
  nonce: 0,
  to: '0x2efbdc840746c862b63077643e5b7dd8bebb8448',
  transactionIndex: 0,
  value: '3000000000000000000'
}

```



{
  difficulty: '1510834',
  extraData: '0x476574682f76312e302e312f6c696e75782f676f312e342e32',
  gasLimit: 3141592,
  gasUsed: 21000,
  hash: '0x24e0169316522901b994006cee97b20d87458d0fa852bf1d763f60402336318c',
  logsBloom: '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
  miner: '0x2efbdc840746c862b63077643e5b7dd8bebb8448',
  nonce: '0x14468588e3d092f2',
  number: 10928,
  parentHash: '0xc6e81f2280ca1612ddc99925cd4d98622ca1d4ddd7641c28ec55e36a87f1c705',
  sha3Uncles: '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
  size: 652,
  stateRoot: '0x4adb9ec86db4a7d25e30ad78070796edd5155bd07dad6020bcc7cc37abf1fda1',
  timestamp: 1439518499,
  totalDifficulty: '9678674262',
  transactions: ['0xf84f9b993d3f948aed0fa8660a1635f90176a20d3faaf244f764f0d600e1e41a' ],
  transactionsRoot: '0x4c8e84feffb93ad528ef81e65e6236bbb6bd7e999806eee4e48ed17f13cd18b1',
  uncles: [ ]
}





が持ち高としてあり、


アカウント間でのetherを送金はトランザクションを生成することで行われます。







### 脚注
[^1] テスト・ネット上での採掘のため、Ethereumの本番ネットワークであるライブ・ネット上では利用できませんのでご注意ください。

